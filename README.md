# QRKot

## Описание:

QRKot - API сервис для сбора средств на обеспечение жизни котов в приютах. Обустройство подвала, покупка еды и медикаментов, а также любые другие цели, которые могут помочь нуждающимся котикам.

В этом фонде одновременно может быть открыто несколько проектов, у них есть описание и необходимая сумма, после сбора которой проект закрывается. Пожертвования в проекты поступают по принципу First In, First Out: все пожертвования идут в проект, открытый раньше других.

Каждый пользователь может совершать пожертвования и сопровождать их комментариями. Пожертвования направлены на фонд в целом, нежели на отдельные проекты, как описано выше. Если пожертвование больше нужной суммы или же в Фонде нет открытых проектов — оставшиеся деньги ждут открытия следующего проекта. При создании нового проекта все неинвестированные пожертвования автоматически вкладываются в новый проект.

В проекте также реализована возможность получить отчет с перечнем профинансированных проектов, отсортированных по времени, потребовавшимся для полного закрытия.

## Технологии и библиотеки:

- [Python](https://www.python.org/);
- [FastAPI](https://www.djangoproject.com);
- [FastAPI Users](https://www.django-rest-framework.org);
- [SQLAlchemy](https://www.postgresql.org);
- [Alembic](https://gunicorn.org);
- [Asyncio](https://docs.python.org/3/library/asyncio.html);
- [Google Sheets](https://www.google.ru/intl/ru/sheets/about/).

## Как запустить проект:

- Клонировать репозиторий и перейти в него в командной строке

- Создайте .env файл в соответствии с рекоммендациями в env.example:

- Создайте и активируйте виртуальное окружение, установите все необходимые пакеты из файла requirements.txt

- Для запуска проекта выполните команду

```
uvicorn app.main:app --reload
```

Используя данные из файла .env произведите авторизацию как администратор, при необходимости.

После запуска доступны следующие эндпоинты:
- Регистрация и аутентификация:
    - **/auth/register** - регистрация пользователя
    - **/auth/jwt/login** - аутентификация пользователя (получение jwt-токена)
    - **/auth/jwt/logout** - выход (сброс jwt-токена)
- Благотворительные проекты:
    - **/charity_project/** - получение списка проектов и создание нового
    - **/charity_project/{project_id}** - изменение и удаление существующего проекта
- Пожертвования:
    - **/donation/** - получение списка всех пожертвований и создание пожертвования
    - **/donation/my** - получение списка всех пожертвований аутентифицированного пользователя
- Пользователи:
    - **/users/me** - получение и изменение данных аутентифицированного пользователя
    - **/users/{id}** - получение и изменение данных пользователя по id
- Отчеты Google Sheets:
    - **/google** - получение отчета о закрытых (профинансированных) проектах в формате Google Sheets. Отчет создается в указанном в .env личном аккаунте Google.

## Над проектом [foodgram](https://github.com/alkh0304/cat_charity_fund) работал:

[Александр Хоменко](https://github.com/alkh0304)